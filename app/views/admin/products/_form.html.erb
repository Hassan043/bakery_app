<style>
  /* Admin Product Form Styling - Brown-Themed BakeryApp */
  
  .product-form {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .form-group {
    display: flex;
    flex-direction: column;
  }

  .form-label {
    color: #5C3D2E;
    font-weight: 700;
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 0.5rem;
  }

  .form-input {
    padding: 0.75rem 1rem;
    border: 2px solid #E7D7C5;
    border-radius: 0.5rem;
    background-color: #FFFFFF;
    color: #5C3D2E;
    font-size: 1rem;
    transition: all 0.3s ease;
  }

  .form-input:focus {
    outline: none;
    border-color: #A78A7F;
    box-shadow: 0 0 0 3px rgba(167, 138, 127, 0.1);
    background-color: #F8F4E9;
  }

  .form-input::placeholder {
    color: #A78A7F;
  }

  .form-textarea {
    min-height: 100px;
    resize: vertical;
  }

  .form-select {
    appearance: none;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: 2.5rem;
  }

  .form-help {
    color: #A78A7F;
    font-size: 0.875rem;
    margin-top: 0.25rem;
  }

  .error-container {
    background: linear-gradient(135deg, #FEF2F2, #FEE2E2);
    border: 2px solid #FECACA;
    border-radius: 0.75rem;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
  }

  .error-title {
    color: #DC2626;
    font-weight: 700;
    font-size: 1rem;
    margin-bottom: 1rem;
  }

  .error-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .error-item {
    color: #DC2626;
    padding: 0.25rem 0;
    padding-left: 1.5rem;
    position: relative;
  }

  .error-item::before {
    content: "â€¢";
    position: absolute;
    left: 0;
    color: #DC2626;
    font-weight: bold;
  }

  .checkbox-group {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .form-checkbox {
    width: 20px;
    height: 20px;
    border: 2px solid #D4B483;
    border-radius: 0.375rem;
    background-color: #FFFFFF;
    accent-color: #5C3D2E;
  }

  .checkbox-label {
    color: #5C3D2E;
    font-weight: 600;
    margin: 0;
  }

  .file-input-container {
    position: relative;
  }

  .file-input {
    width: 100%;
    padding: 0.75rem;
    border: 2px dashed #D4B483;
    border-radius: 0.75rem;
    background-color: #F8F4E9;
    color: #5C3D2E;
    transition: all 0.3s ease;
  }

  .file-input:hover {
    border-color: #A78A7F;
    background-color: #E7D7C5;
  }

  .file-input::file-selector-button {
    background: linear-gradient(135deg, #5C3D2E, #4A2F20);
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 0.375rem;
    font-weight: 600;
    margin-right: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .file-input::file-selector-button:hover {
    transform: scale(1.05);
    box-shadow: 0 2px 8px rgba(92, 61, 46, 0.3);
  }

  .current-image-container {
    background-color: #F8F4E9;
    border: 1px solid #E7D7C5;
    border-radius: 0.75rem;
    padding: 1rem;
    margin-top: 0.75rem;
  }

  .current-image-title {
    color: #5C3D2E;
    font-weight: 700;
    font-size: 0.875rem;
    margin-bottom: 0.75rem;
  }

  .current-image-content {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
  }

  .current-image-preview {
    width: 96px;
    height: 96px;
    object-fit: cover;
    border-radius: 0.5rem;
    border: 2px solid #D4B483;
    box-shadow: 0 2px 8px rgba(92, 61, 46, 0.1);
  }

  .current-image-info {
    flex: 1;
  }

  .image-path {
    color: #5C3D2E;
    font-size: 0.875rem;
    margin-bottom: 0.5rem;
  }

  .image-path strong {
    color: #A78A7F;
  }

  .preview-container {
    background: linear-gradient(135deg, #E0F2FE, #BAE6FD);
    border: 2px solid #7DD3FC;
    border-radius: 0.75rem;
    padding: 1rem;
    margin-top: 0.75rem;
  }

  .preview-container.hidden {
    display: none;
  }

  .preview-title {
    color: #0369A1;
    font-weight: 700;
    font-size: 0.875rem;
    margin-bottom: 0.75rem;
  }

  .preview-image {
    width: 96px;
    height: 96px;
    object-fit: cover;
    border-radius: 0.5rem;
    border: 2px solid #7DD3FC;
    box-shadow: 0 2px 8px rgba(3, 105, 161, 0.1);
  }

  .form-actions {
    display: flex;
    justify-content: flex-end;
    gap: 1rem;
    padding-top: 1.5rem;
    border-top: 2px solid #E7D7C5;
    margin-top: 1.5rem;
  }

  .btn {
    padding: 0.75rem 1.5rem;
    border-radius: 0.5rem;
    font-weight: 700;
    text-decoration: none;
    transition: all 0.3s ease;
    border: none;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
  }

  .btn-cancel {
    background-color: #E7D7C5;
    color: #5C3D2E;
    border: 1px solid #D4B483;
  }

  .btn-cancel:hover {
    background-color: #D4B483;
    color: white;
    transform: translateY(-2px);
    text-decoration: none;
  }

  .btn-submit {
    background: linear-gradient(135deg, #5C3D2E, #4A2F20);
    color: white;
  }

  .btn-submit:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(92, 61, 46, 0.3);
    color: white;
  }
</style>

<%= form_with(model: [:admin, @product], local: true, html: { class: "product-form", multipart: true }) do |form| %>
  <% if @product.errors.any? %>
    <div class="error-container">
      <div class="error-title"><%= pluralize(@product.errors.count, "error") %> prohibited this product from being saved:</div>
      <ul class="error-list">
        <% @product.errors.full_messages.each do |message| %>
          <li class="error-item"><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-group">
    <%= form.label :name, class: "form-label" %>
    <%= form.text_field :name, class: "form-input", placeholder: "Enter product name" %>
  </div>

  <div class="form-group">
    <%= form.label :description, class: "form-label" %>
    <%= form.text_area :description, rows: 4, class: "form-input form-textarea", placeholder: "Describe your delicious product..." %>
  </div>

  <div class="form-group">
    <%= form.label :price, class: "form-label" %>
    <%= form.number_field :price, step: 0.01, class: "form-input", placeholder: "0.00" %>
    <div class="form-help">Enter price in dollars (e.g., 12.99)</div>
  </div>

  <div class="form-group">
    <%= form.label :category_id, "Category", class: "form-label" %>
    <%= form.collection_select :category_id, Category.all, :id, :name, 
          { prompt: 'Select a category' }, 
          { class: "form-input form-select" } %>
  </div>

  <div class="form-group">
    <%= form.label :image, "Product Image", class: "form-label" %>
    <div class="file-input-container">
      <%= form.file_field :image, 
            accept: "image/*",
            class: "file-input",
            onchange: "previewImage(this)" %>
      <div class="form-help">Upload a clear, high-quality image of your product (JPG, PNG, GIF)</div>
    </div>
    
    <% if @product.has_image? %>
      <div class="current-image-container">
        <div class="current-image-title">Current Image:</div>
        <div class="current-image-content">
          <%= image_tag @product.image_path, class: "current-image-preview", alt: @product.name %>
          <div class="current-image-info">
            <div class="image-path">
              <strong>Path:</strong> <%= @product.image_path %>
            </div>
            <div class="form-help">
              Select a new image above to replace the current one
            </div>
          </div>
        </div>
      </div>
    <% end %>
    
    <div id="image-preview" class="preview-container hidden">
      <div class="preview-title">New Image Preview:</div>
      <img id="preview-img" class="preview-image">
    </div>
  </div>

  <script>
    function previewImage(input) {
      const preview = document.getElementById('image-preview');
      const previewImg = document.getElementById('preview-img');
      
      if (input.files && input.files[0]) {
        const reader = new FileReader();
        
        reader.onload = function(e) {
          previewImg.src = e.target.result;
          preview.classList.remove('hidden');
        }
        
        reader.readAsDataURL(input.files[0]);
      } else {
        preview.classList.add('hidden');
      }
    }
  </script>

  <div class="form-group">
    <div class="checkbox-group">
      <%= form.check_box :availability, class: "form-checkbox" %>
      <%= form.label :availability, "Available for sale", class: "checkbox-label" %>
    </div>
  </div>

  <div class="form-group">
    <%= form.label :quantity, "Stock Quantity", class: "form-label" %>
    <%= form.number_field :quantity, 
          min: 0, 
          placeholder: "Enter available quantity", 
          class: "form-input" %>
    <div class="form-help">Number of items available in stock</div>
  </div>
  <div class="form-actions">
    <%= link_to "Cancel", admin_products_path, class: "btn btn-cancel" %>
    <%= form.submit (@product.persisted? ? "Update Product" : "Create Product"), 
          class: "btn btn-submit" %>
  </div>
<% end %>
